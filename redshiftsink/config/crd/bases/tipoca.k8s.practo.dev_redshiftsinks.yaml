
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.2.5
  creationTimestamp: null
  name: redshiftsinks.tipoca.k8s.practo.dev
spec:
  group: tipoca.k8s.practo.dev
  names:
    kind: RedshiftSink
    listKind: RedshiftSinkList
    plural: redshiftsinks
    shortNames:
    - rsk
    - rsks
    singular: redshiftsink
  scope: Namespaced
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: RedshiftSink is the Schema for the redshiftsinks API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: RedshiftSinkSpec defines the desired state of RedshiftSink
          properties:
            batcher:
              description: RedshiftBatcherSpec defines the desired state of RedshiftBatcher
              properties:
                mask:
                  description: 'Mask when turned on enables masking of the data Default:
                    false'
                  type: boolean
                maskFile:
                  type: string
                maxSize:
                  description: Max configurations for the batcher to batch
                  type: integer
                maxWaitSeconds:
                  type: integer
                podTemplate:
                  description: Template describes the pods that will be created. if
                    this is not specifed, a default pod template is created
                  properties:
                    image:
                      description: Image for the underlying pod
                      type: string
                    resources:
                      description: Resources is for configuring the compute resources
                        required
                      properties:
                        limits:
                          additionalProperties:
                            anyOf:
                            - type: integer
                            - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: 'Limits describes the maximum amount of compute
                            resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/'
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                            - type: integer
                            - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: 'Requests describes the minimum amount of compute
                            resources required. If Requests is omitted for a container,
                            it defaults to Limits if that is explicitly specified,
                            otherwise to an implementation-defined value. More info:
                            https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/'
                          type: object
                      type: object
                    tolerations:
                      description: Toleartions the underlying pods should have
                      items:
                        description: The pod this Toleration is attached to tolerates
                          any taint that matches the triple <key,value,effect> using
                          the matching operator <operator>.
                        properties:
                          effect:
                            description: Effect indicates the taint effect to match.
                              Empty means match all taint effects. When specified,
                              allowed values are NoSchedule, PreferNoSchedule and
                              NoExecute.
                            type: string
                          key:
                            description: Key is the taint key that the toleration
                              applies to. Empty means match all taint keys. If the
                              key is empty, operator must be Exists; this combination
                              means to match all values and all keys.
                            type: string
                          operator:
                            description: Operator represents a key's relationship
                              to the value. Valid operators are Exists and Equal.
                              Defaults to Equal. Exists is equivalent to wildcard
                              for value, so that a pod can tolerate all taints of
                              a particular category.
                            type: string
                          tolerationSeconds:
                            description: TolerationSeconds represents the period of
                              time the toleration (which must be of effect NoExecute,
                              otherwise this field is ignored) tolerates the taint.
                              By default, it is not set, which means tolerate the
                              taint forever (do not evict). Zero and negative values
                              will be treated as 0 (evict immediately) by the system.
                            format: int64
                            type: integer
                          value:
                            description: Value is the taint value the toleration matches
                              to. If the operator is Exists, the value should be empty,
                              otherwise just a regular string.
                            type: string
                        type: object
                      type: array
                  type: object
                suspend:
                  description: 'Supsend when turned on makes sure no batcher pods
                    are running for this CRD object. Default: false'
                  type: boolean
              required:
              - maxSize
              - maxWaitSeconds
              type: object
            kafkaBrokers:
              description: Kafka configurations like consumer group and topics to
                watch
              type: string
            kafkaLoaderTopicPrefix:
              type: string
            kafkaTopicRegexes:
              type: string
            kafkaVersion:
              type: string
            loader:
              description: RedshiftLoaderSpec defines the desired state of RedshifLoader
              properties:
                maxSize:
                  description: Max configurations for the loader to batch and load
                  type: integer
                maxWaitSeconds:
                  type: integer
                podTemplate:
                  description: Template describes the pods that will be created. if
                    this is not specifed, a default pod template is created
                  properties:
                    image:
                      description: Image for the underlying pod
                      type: string
                    resources:
                      description: Resources is for configuring the compute resources
                        required
                      properties:
                        limits:
                          additionalProperties:
                            anyOf:
                            - type: integer
                            - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: 'Limits describes the maximum amount of compute
                            resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/'
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                            - type: integer
                            - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: 'Requests describes the minimum amount of compute
                            resources required. If Requests is omitted for a container,
                            it defaults to Limits if that is explicitly specified,
                            otherwise to an implementation-defined value. More info:
                            https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/'
                          type: object
                      type: object
                    tolerations:
                      description: Toleartions the underlying pods should have
                      items:
                        description: The pod this Toleration is attached to tolerates
                          any taint that matches the triple <key,value,effect> using
                          the matching operator <operator>.
                        properties:
                          effect:
                            description: Effect indicates the taint effect to match.
                              Empty means match all taint effects. When specified,
                              allowed values are NoSchedule, PreferNoSchedule and
                              NoExecute.
                            type: string
                          key:
                            description: Key is the taint key that the toleration
                              applies to. Empty means match all taint keys. If the
                              key is empty, operator must be Exists; this combination
                              means to match all values and all keys.
                            type: string
                          operator:
                            description: Operator represents a key's relationship
                              to the value. Valid operators are Exists and Equal.
                              Defaults to Equal. Exists is equivalent to wildcard
                              for value, so that a pod can tolerate all taints of
                              a particular category.
                            type: string
                          tolerationSeconds:
                            description: TolerationSeconds represents the period of
                              time the toleration (which must be of effect NoExecute,
                              otherwise this field is ignored) tolerates the taint.
                              By default, it is not set, which means tolerate the
                              taint forever (do not evict). Zero and negative values
                              will be treated as 0 (evict immediately) by the system.
                            format: int64
                            type: integer
                          value:
                            description: Value is the taint value the toleration matches
                              to. If the operator is Exists, the value should be empty,
                              otherwise just a regular string.
                            type: string
                        type: object
                      type: array
                  type: object
                redshiftGroup:
                  description: RedshiftGroup to give the access to when new topics
                    gets released
                  type: string
                redshiftSchema:
                  description: RedshiftSchema to sink the data in
                  type: string
                suspend:
                  description: 'Supsend when turned on makes sure no batcher pods
                    are running for this CRD object. Default: false'
                  type: boolean
              required:
              - maxSize
              - maxWaitSeconds
              - redshiftGroup
              - redshiftSchema
              type: object
            releaseCondition:
              description: ReleaseCondition specifies the release condition to consider
                a topic realtime and to consider the topci to be moved from reloading
                to released This is relevant only if masking is turned on in mask
                configuration. It is used for live mask reloading.
              properties:
                maxBatcherLag:
                  description: MaxBatcherLag is the maximum lag the batcher consumer
                    group shoud have to be be considered to be operating in realtime
                    and to be considered for release.
                  format: int64
                  type: integer
                maxLoaderLag:
                  description: MaxLoaderLag is the maximum lag the loader consumer
                    group shoud have to be be considered to be operating in realtime
                    and to be considered for release.
                  format: int64
                  type: integer
              required:
              - maxBatcherLag
              - maxLoaderLag
              type: object
            secretRefName:
              description: 'Secrets to be used Default: the secret name and namespace
                provided in the controller flags'
              type: string
            secretRefNamespace:
              description: 'Secrets namespace to be used Default: the secret name
                and namespace provided in the controller flags'
              type: string
            topicReleaseCondition:
              additionalProperties:
                properties:
                  maxBatcherLag:
                    description: MaxBatcherLag is the maximum lag the batcher consumer
                      group shoud have to be be considered to be operating in realtime
                      and to be considered for release.
                    format: int64
                    type: integer
                  maxLoaderLag:
                    description: MaxLoaderLag is the maximum lag the loader consumer
                      group shoud have to be be considered to be operating in realtime
                      and to be considered for release.
                    format: int64
                    type: integer
                required:
                - maxBatcherLag
                - maxLoaderLag
                type: object
              description: TopicReleaseCondition is considered instead of ReleaseCondition
                if it is defined for a topic. This is used for topics which does not
                work well with central ReleaseCondition for all topics
              type: object
          required:
          - batcher
          - kafkaBrokers
          - kafkaTopicRegexes
          - loader
          - releaseCondition
          - topicReleaseCondition
          type: object
        status:
          description: RedshiftSinkStatus defines the observed state of RedshiftSink
          properties:
            maskStatus:
              description: MaskStatus stores the status of masking for topics if masking
                is enabled
              properties:
                currentMaskStatus:
                  additionalProperties:
                    description: TopicMaskStatus store the mask status of a single
                      topic
                    properties:
                      phase:
                        description: Phase determines the
                        type: string
                      version:
                        description: MaskFileVersion is the current mask configuration
                          being used
                        type: string
                    type: object
                  description: CurrentMaskStatus stores the current status of mask
                    status of topics
                  type: object
                currentMaskVersion:
                  description: CurrentMaskVersion stores the mask version which was
                    completely rolled out in all the topics.
                  type: string
                desiredMaskStatus:
                  additionalProperties:
                    description: TopicMaskStatus store the mask status of a single
                      topic
                    properties:
                      phase:
                        description: Phase determines the
                        type: string
                      version:
                        description: MaskFileVersion is the current mask configuration
                          being used
                        type: string
                    type: object
                  description: DesiredMaskStatus stores the current status of mask
                    status of topics
                  type: object
                desiredMaskedVersion:
                  description: DesiredMaskVersion stores the latest mask version which
                    should be completely rolled out in all the topics.
                  type: string
              type: object
            topicGroups:
              additionalProperties:
                properties:
                  id:
                    description: ID stores the name of the consumer group for the
                      topic based on this batcher and loader consumer groups are made
                    type: string
                  loaderTopicPrefix:
                    description: LoaderTopicPrefix stores the name of the loader topic
                      prefix
                    type: string
                required:
                - id
                - loaderTopicPrefix
                type: object
              description: TopicGroup stores the group info for the topic
              type: object
          type: object
      type: object
  version: v1
  versions:
  - name: v1
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
